<!DOCTYPE html>
<html>
<head>
  <title>imago.js</title>
  <link rel="stylesheet" href="../test/fixture.css">
</head>
<body>
  <article>
    <h1>imago.js</h1>
    <img id="image" src="../test/fixture.jpg" alt="Davide Gabino">
    <div class="actions">
      <button id="editButton" onclick="edit()">edit</button>
      <button id="saveButton" onclick="save()" disabled="true">save</button>
      <button id="undoButton" onclick="undo()" disabled="true">undo</button>
      <button id="resetButton" onclick="reset()" disabled="true">reset</button>
    </div>
  </article>

  <script type="text/javascript" src="../src/imago.js"></script>
  <script type="text/javascript">
    var editButton = document.getElementById('editButton'),
        saveButton = document.getElementById('saveButton'),
        undoButton = document.getElementById('undoButton'),
        resetButton = document.getElementById('resetButton'),
        image = new Imago(document.getElementById('image'));

    function enableEdition() {
      editButton.setAttribute('disabled', true);
      saveButton.removeAttribute('disabled');
      undoButton.removeAttribute('disabled');
      resetButton.removeAttribute('disabled');
    }

    function disableEdition() {
      editButton.removeAttribute('disabled');
      saveButton.setAttribute('disabled', true);
      undoButton.setAttribute('disabled', true);
      resetButton.setAttribute('disabled', true);
    }
    
    function edit() {
      enableEdition();
      image.edit();
    }

    function save() {
      disableEdition();
      image.save();
    }

    function undo() {
      disableEdition();
      image.undo();
    }

    function reset() {
      disableEdition();
      image.reset();
    }
  </script>
</body>
</html>
